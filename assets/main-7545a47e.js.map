{"version":3,"file":"main-7545a47e.js","sources":["../../src/js/booksAPI.js","../../src/js/all-categories.js","../../src/js/main.js"],"sourcesContent":["// import axios from 'axios';\nimport axios from 'https://cdn.jsdelivr.net/npm/axios@1.3.5/+esm';\n\nconst BASE_URL = \"https://books-backend.p.goit.global\";\nconst END_POINTS = [\n    '/books/category-list',\n    '/books/top-books',\n    '/books/category',\n    '/books',\n];\n\n\nexport async function getCategoryList() {\n    const url = `${BASE_URL}${END_POINTS[0]}`;\n    try {\n        const res = await axios.get(url);\n        return res.data;\n    } catch (error) {\n        console.error('Error fetching category list: ', error);\n        throw error;\n    }\n}\n\nexport async function getTopList() {\n    const url = `${BASE_URL}${END_POINTS[1]}`;\n    try {\n        const res = await axios.get(url);\n        return res.data;\n    } catch (error) {\n        console.error('Error fetching Top Books list: ', error);\n        throw error;\n    }\n}\n\nexport async function getBooksByCategory(category) {\n    const url = `${BASE_URL}${END_POINTS[2]}`;\n    const params = {\n        category: category,\n    };\n    try {\n        const res = await axios.get(url, { params });\n        return res.data;\n    } catch (error) {\n        console.error('Error fetching books by category name: ', error);\n        throw error;\n    }\n}\n\nexport async function getBookById(id) {\n      const url = `${BASE_URL}${END_POINTS[3]}/${id}`;\n      try {\n          const res = await axios.get(url);\n          return res.data;\n      } catch (error) {\n          console.error('Error fetching book by id: ', error);\n          throw error;\n      }\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { getCategoryList } from '../js/booksAPI';\n\nconst allCategories = document.querySelector('.all-categories');\n\nfunction renderCategoryList(arr) {\n  const markup = arr\n    .map(item => {\n      return `\n            <li class=\"gallery-item\">\n            <a class=\"gallery-link\" href=#>${item.list_name}\n            </a>\n          </li>`;\n    })\n    .join('');\n  return markup;\n}\n\nfunction viewLightBox(markup) {\n  allCategories.insertAdjacentHTML('beforeend', markup);\n}\n\ngetCategoryList()\n  .then(response => renderCategoryList(response))\n  .then(markup => viewLightBox(markup))\n  .catch(error =>\n    iziToast.error({\n      maxWidth: '432px',\n      messageColor: 'rgb(250, 250, 251)',\n      messageSize: '16px',\n      backgroundColor: 'rgb(239, 64, 64)',\n      position: 'topRight',\n      message: `${error}`,\n    })\n  );\n","import { getTopList } from './booksAPI.js';\nimport { getBooksByCategory } from './booksAPI.js';\n\nconst refs = {\n    topListElem: document.querySelector('#topList'),\n    categoryListElem: document.querySelector('#categoryList'),\n  };\n\n\ndocument.addEventListener(\"DOMContentLoaded\", async function() {\n    refs.topListElem.innerHTML = '';\n    const topListData = getTopList();\n    const topList = await topListData;\n    topList.forEach(elem => {\n        // console.log(elem);\n        renderTopList(elem)\n    });\n});\n\nfunction renderTopList(elem) {\n    const html = `\n        <li class=\"top_list-container\">\n            <h2 class=\"top_list-category_name\">${elem.list_name}</h2>\n            <ul class=\"top_list-cards\">${renderBooks(elem.books)}</ul>\n            <button class=\"top_list-see_more\" data-category=\"${elem.list_name}\">See More</button>\n        </li>\n    `;\n    refs.topListElem.innerHTML += html;\n}\n\nfunction renderBooks(books) {\n    let i = 1; // порядковый номер от 1 до 5 для скрытия ненужных книг в мобильных стилях\n    const bookHtml = books.map(book => `\n        <li class=\"top_list-card\" data-book-sequence-number=\"${i++}\">\n            <img class=\"top_list-book_cover\" src=\"${book.book_image}\" data-bookid=\"${book._id}\" alt=\"${book.title}\">\n            <h3 class=\"top_list-book_title\">${book.title}</h3>\n            <p class=\"top_list-book_author\">${book.author}</p>\n        </li>\n    `).join('');\n    i++;\n    return bookHtml;\n}\n\n// Слушатель нажатие по книже\ndocument.addEventListener('DOMContentLoaded', function() {\n    document.addEventListener('click', function(event) {\n        if (event.target.classList.contains('top_list-book_cover')) {\n            const bookId = event.target.dataset.bookid;\n            console.log(\"book id: \", bookId);\n        }\n    });\n});\n\n// Слушатель кнопки \"See More\"\ndocument.addEventListener('DOMContentLoaded', function() {\n    document.addEventListener('click', function(event) {\n        if (event.target.classList.contains('top_list-see_more')) {\n            const category = event.target.dataset.category;\n            // console.log(\"category: \", category);\n            seeMore(category);\n        }\n    });\n});\n\n// Функция See More\nfunction seeMore(category) {\n    const topList = document.getElementById('topList');\n    const categoryList = document.getElementById('categoryList');\n    topList.classList.add('hidden');\n    categoryList.classList.remove('hidden');\n    CategoryList(category);\n}\n\n// Асинхронная функция которая получает список книг по категории\nasync function CategoryList(category) {\n    const categoryDataPromise = getBooksByCategory(category);\n    const categoryData = await categoryDataPromise;\n    categoryData.forEach(book => {\n        // console.log(book._id);\n        console.log(book);\n        // renderCategoryList(book);\n    });\n};\n\n\n// рисуем книги по категории...\nfunction renderCategoryList(elem) {\n    const html = `\n        <li class=\"category_list-container\">\n            <h2 class=\"category_list-category_name\">${elem.list_name}</h2>\n            <ul class=\"category_list-cards\">${renderBooks(elem.books)}</ul>\n            <button class=\"category_list-see_more\" data-category=\"${elem.list_name}\">See More</button>\n        </li>\n    `;\n    refs.topListElem.innerHTML += html;\n}\n\n\n\n\n\n\n\n\n\n\n\n// function renderCategoryList(category) {\n// //     const html = `\n// //     <li class=\"category_list-container\">\n// //         <h2 class=\"category_list-category_name\">${elem.list_name}</h2>\n// //         <ul class=\"category_list-cards\">${renderBooks(elem.books)}</ul>\n// //     </li>\n// // `;\n//     const html = ` Тут будут книги категории ${category} `;\n//     refs.categoryListElem.innerHTML += html;\n// }\n\n\n\n// document.addEventListener(\"DOMContentLoaded\", async function() {\n//     const categoryListData = getCategoryList();\n//     const categoryList = await categoryListData;\n//     const ulElement = document.getElementById(\"categoryList\"); // Получаем DOM элемент <ul> по его идентификатору\n//     categoryList.forEach(category => {\n//         const liElement = document.createElement(\"li\");\n//         liElement.textContent = category.list_name;\n//         liElement.classList.add(\"categoryList\"); \n//         ulElement.appendChild(liElement); \n//     });\n// });\n\n\n// document.querySelector(\"#booksByCategory\").addEventListener(\"click\", async function() {\n//     const categoryDataPromise = getBooksByCategory(category);\n//     const categoryData = await categoryDataPromise;\n//     categoryData.forEach(book => {\n//         console.log(book._id);\n//         console.log(book.list_name);\n//     });\n// });\n\n// // выод информации по одной книге\n// document.querySelector(\"#btnBook\").addEventListener(\"click\", async function() {\n//     let id = \"643282b1e85766588626a080\"; // пример id книги\n//     const bookDataPromise = getBookById(id);\n//     const bookData = await bookDataPromise;\n//     const author = bookData.author;\n//     const title = bookData.title;\n//     console.log(\"Author:\", author);\n//     console.log(\"Title:\", title);\n// });\n"],"names":["BASE_URL","END_POINTS","getCategoryList","url","axios","error","getTopList","getBooksByCategory","category","params","allCategories","renderCategoryList","arr","item","viewLightBox","markup","response","iziToast","refs","elem","renderTopList","html","renderBooks","books","i","bookHtml","book","event","bookId","seeMore","topList","categoryList","CategoryList"],"mappings":"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"}