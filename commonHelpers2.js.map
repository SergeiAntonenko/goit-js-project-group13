{"version":3,"file":"commonHelpers2.js","sources":["../src/js/shopping-page.js"],"sourcesContent":["import { getBookById, getBookByIds } from './booksAPI';\n\nconst refs = {\n  bookList: document.querySelector('.shopping-list-saved'),\n  emptyList: document.querySelector('.shopping-list-empty'),\n  //   deleteBtns: document.querySelectorAll('.saved-item-delete-btn'),\n};\n\ncreateShoppingList();\n\nfunction getBooksStorage() {\n  const savedBooks = localStorage.getItem('shoppingIdList');\n  const bookIdArray = JSON.parse(savedBooks);\n  return bookIdArray;\n}\n\nasync function createShoppingList() {\n  const bookIds = getBooksStorage();\n  if (!bookIds || bookIds.length === 0) {\n    removeHidden(refs.emptyList);\n  } else {\n    const booksArray = await getBookByIds(bookIds);\n\n    if (booksArray && booksArray.length !== 0) {\n      renderBooks(booksArray);\n\n      document\n        .querySelectorAll('.saved-item-delete-btn')\n        .forEach(btn => btn.addEventListener('click', removeBookFromStorage));\n    }\n  }\n}\n\nfunction shoppingListMarkup(books) {\n  console.log(books);\n  return books\n    .map(\n      ({\n        _id,\n        book_image,\n        title,\n        list_name,\n        description,\n        author,\n        buy_links,\n      }) => {\n        const shopHrefs = buy_links.reduce((acc, item) => {\n          console.log(item.name === 'Amazon');\n          if (item.name === 'Amazon') {\n            acc.amazon = item.url;\n          }\n          if (item.name === 'Apple Books') {\n            acc.apple = item.url;\n          }\n          return acc;\n        }, {});\n\n        return `<li class=\"saved-item\">\n      <div class=\"saved-item-cover\">\n        <img\n          class=\"saved-item-cover-img\"\n          src=\"${book_image}\"\n          alt=\"${title}\"\n        />\n      </div>\n      <div class=\"saved-item-discription\">\n        <div class=\"saved-item-discription-top\">\n          <div class=\"saved-item-title-wrap\">\n            <h2 class=\"saved-item-title\">${title}</h2>\n            <p class=\"saved-item-genre\">${list_name}</p>\n          </div>\n          <button class=\"saved-item-delete-btn\" data-id=${_id}>\n            <img\n              class=\"delete-btn-img\"\n              src=\"../img/shopping list/trash-03.svg\"\n              alt=\"delete button\"\n            />\n          </button>\n        </div>\n        <p class=\"saved-item-short\">\n          ${description}\n        </p>\n        <div class=\"saved-item-wrap-bottom\">\n          <p class=\"saved-item-author\">${author}</p>\n          <ul class=\"saved-item-refer-list\">\n            <li class=\"saved-item-refer-item\">\n              <a\n                href=\"${shopHrefs.amazon}\"\n                class=\"saved-item-refer-item-link\"\n                target=\"_blank\"\n              >\n                <svg\n                  class=\"saved-item-refer-amazon-logo\"\n                  width=\"62\"\n                  height=\"19\"\n                >\n                  <use href=\"../img/modal/modal-icons.svg#icon-amazon-logo\"></use>\n                </svg>\n              </a>\n            </li>\n            <li class=\"saved-item-refer-item\">\n              <a\n                href=\"${shopHrefs.apple}\"\n                class=\"saved-item-refer-item-link\"\n                target=\"_blank\"\n              >\n                <svg\n                  class=\"saved-item-refer-ibooks-logo\"\n                  width=\"16\"\n                  height=\"16\"\n                >\n                  <use href=\"../img/modal/modal-icons.svg#icon-ibooks-logo\"></use>\n                </svg>\n              </a>\n            </li>\n          </ul>\n        </div>\n      </div>\n    </li>`;\n      }\n    )\n    .join('');\n}\n\nfunction renderBooks(books) {\n  const markup = shoppingListMarkup(books);\n  refs.bookList.insertAdjacentHTML('beforeend', markup);\n}\n\nfunction setHidden(el) {\n  el.classList.add('is-hidden');\n}\n\nfunction removeHidden(el) {\n  el.classList.remove('is-hidden');\n}\n\nfunction removeBookFromStorage(e) {\n  const id = e.currentTarget.dataset.id;\n  const bookIds = getBooksStorage();\n  const filtredBooks = bookIds.filter(bookId => id !== bookId);\n  localStorage.setItem('shoppingIdList', JSON.stringify(filtredBooks));\n  refs.bookList.innerHTML = '';\n  createShoppingList();\n}\n"],"names":["refs","createShoppingList","getBooksStorage","savedBooks","bookIds","removeHidden","booksArray","getBookByIds","renderBooks","btn","removeBookFromStorage","shoppingListMarkup","books","_id","book_image","title","list_name","description","author","buy_links","shopHrefs","acc","item","markup","el","id","filtredBooks","bookId"],"mappings":"2GAEA,MAAMA,EAAO,CACX,SAAU,SAAS,cAAc,sBAAsB,EACvD,UAAW,SAAS,cAAc,sBAAsB,CAE1D,EAEAC,IAEA,SAASC,GAAkB,CACzB,MAAMC,EAAa,aAAa,QAAQ,gBAAgB,EAExD,OADoB,KAAK,MAAMA,CAAU,CAE3C,CAEA,eAAeF,GAAqB,CAClC,MAAMG,EAAUF,IAChB,GAAI,CAACE,GAAWA,EAAQ,SAAW,EACjCC,EAAaL,EAAK,SAAS,MACtB,CACL,MAAMM,EAAa,MAAMC,EAAaH,CAAO,EAEzCE,GAAcA,EAAW,SAAW,IACtCE,EAAYF,CAAU,EAEtB,SACG,iBAAiB,wBAAwB,EACzC,QAAQG,GAAOA,EAAI,iBAAiB,QAASC,CAAqB,CAAC,EAEzE,CACH,CAEA,SAASC,EAAmBC,EAAO,CACjC,eAAQ,IAAIA,CAAK,EACVA,EACJ,IACC,CAAC,CACC,IAAAC,EACA,WAAAC,EACA,MAAAC,EACA,UAAAC,EACA,YAAAC,EACA,OAAAC,EACA,UAAAC,CACR,IAAY,CACJ,MAAMC,EAAYD,EAAU,OAAO,CAACE,EAAKC,KACvC,QAAQ,IAAIA,EAAK,OAAS,QAAQ,EAC9BA,EAAK,OAAS,WAChBD,EAAI,OAASC,EAAK,KAEhBA,EAAK,OAAS,gBAChBD,EAAI,MAAQC,EAAK,KAEZD,GACN,CAAE,CAAA,EAEL,MAAO;AAAA;AAAA;AAAA;AAAA,iBAIEP,CAAU;AAAA,iBACVC,CAAK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2CAMqBA,CAAK;AAAA,0CACNC,CAAS;AAAA;AAAA,0DAEOH,CAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YASjDI,CAAW;AAAA;AAAA;AAAA,yCAGkBC,CAAM;AAAA;AAAA;AAAA;AAAA,wBAIvBE,EAAU,MAAM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAehBA,EAAU,KAAK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAiBhC,CACF,EACA,KAAK,EAAE,CACZ,CAEA,SAASZ,EAAYI,EAAO,CAC1B,MAAMW,EAASZ,EAAmBC,CAAK,EACvCZ,EAAK,SAAS,mBAAmB,YAAauB,CAAM,CACtD,CAMA,SAASlB,EAAamB,EAAI,CACxBA,EAAG,UAAU,OAAO,WAAW,CACjC,CAEA,SAASd,EAAsB,EAAG,CAChC,MAAMe,EAAK,EAAE,cAAc,QAAQ,GAE7BC,EADUxB,IACa,OAAOyB,GAAUF,IAAOE,CAAM,EAC3D,aAAa,QAAQ,iBAAkB,KAAK,UAAUD,CAAY,CAAC,EACnE1B,EAAK,SAAS,UAAY,GAC1BC,GACF"}